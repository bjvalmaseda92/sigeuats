{% extends 'backend.html.twig' %}
{% block title %}Editar usuario: {{ entity }} - SIGEUATS{% endblock %}

{% block menuuser %}
    {% if is_granted('ROLE_ADMIN') %}
        <li class="sub-menu">
            <a href="javascript:;" class="active" >
                <i class="fa fa-users"></i>
                <span>Usuarios</span>
            </a>
            <ul class="sub">
                <li ><a  href="{{ path('usuario') }}">Mostrar usuarios</a></li>
                <li ><a  href="{{ path('usuario_new') }}">Añadir usuario</a></li>
            </ul>
        </li>
    {% endif %}
{% endblock %}

{% block content %}
    <section id="main-content">
        <section class="wrapper">
            <div class="row mt">
                <div class="col-md-12">
                    {% for mensaje in app.session.flashbag.get('success') %}
                        <div class="alert alert-success">{{ mensaje }}</div>
                    {% endfor %}
                    <div class="content-panel padding-5">
                        <h4><i class="fa fa-angle-right"></i> Editar usuario: {{ entity }}</h4>
                        <hr>

                        <form method="post" class="form-horizontal"  {{ form_enctype(edit_form) }} action="{{ path('usuario_update', {'id': entity.id}) }}">
                            <div class="form-group{% if form_errors(edit_form.nombre) %} has-error{% endif %}">
                                <label class="col-sm-2 control-label col-lg-2">Nombre</label>
                                <div class="col-lg-10">
                                    {{ form_widget(edit_form.nombre, { 'attr': {'class': 'form-control'} }) }}
                                    {% if form_errors(edit_form.nombre) %}
                                        <span class="help-block text-danger">
                                        {{ form_errors(edit_form.nombre) }}
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group {% if form_errors(edit_form.apellidos) %} has-error{% endif %}">
                                <label class="col-sm-2 control-label col-lg-2">Apellidos</label>
                                <div class="col-lg-10">
                                    {{ form_widget(edit_form.apellidos, { 'attr': {'class': 'form-control'} }) }}
                                    {% if form_errors(edit_form.apellidos) %}
                                        <span class="help-block text-danger">
                                        {{ form_errors(edit_form.apellidos) }}
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group {% if form_errors(edit_form.nombreUsuario) %} has-error{% endif %}">
                                <label class="col-sm-2 control-label col-lg-2">Nombre de usuario</label>
                                <div class="col-lg-10">
                                    {{ form_widget(edit_form.nombreUsuario, { 'attr': {'class': 'form-control'} }) }}
                                    {% if form_errors(edit_form.nombreUsuario) %}
                                        <span class="help-block text-danger">
                                        {{ form_errors(edit_form.nombreUsuario) }}
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group {% if form_errors(edit_form.correo) %} has-error{% endif %}">
                                <label class="col-sm-2 control-label col-lg-2">Correo electrónico</label>
                                <div class="col-lg-10">
                                    {{ form_widget(edit_form.correo, { 'attr': {'class': 'form-control'} }) }}
                                    {% if form_errors(edit_form.correo) %}
                                        <span class="help-block text-danger">
                                        {{ form_errors(edit_form.correo) }}
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label col-lg-2">Contraseña</label>
                                <div class="col-lg-10">
                                    {{ form_widget(edit_form.password.first, { 'attr': {'class': 'form-control'} }) }}
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label col-lg-2">Confirmar contraseña</label>
                                <div class="col-lg-10">
                                    {{ form_widget(edit_form.password.second, { 'attr': {'class': 'form-control'} }) }}

                                    <span class="help-block">Deje estos campos en blanco si no desea cambiar su contraseña actual</span>

                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label col-lg-2">Permisos</label>
                                <div class="col-lg-10">
                                    {{ form_widget(edit_form.rol, { 'attr': {'class': 'form-control'} }) }}
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label col-lg-2">Imagen</label>
                                <div class="col-lg-10">
                                    {{ form_widget(edit_form.picture) }}
                                    <span class="help-block">Seleccione una imagen no mayor de 6MB en formato JPG/JPGE/PNG para sustitur la actual</span>
                                </div>
                            </div>
                            {{ form_row(edit_form._token) }}
                            <button class='btn btn-success' type="submit"><i class="fa fa-check-square-o"></i> Aceptar </button>
                            <a href="{{ path('usuario') }}" class='btn btn-danger' type="reset"><i class="fa fa-minus-square-o"></i> Cancelar</a>

                        </form>
                    </div><!-- /content-panel -->
                </div><!-- /col-md-12 -->
            </div><!-- /row -->

        </section><! --/wrapper -->
    </section><!-- /MAIN CONTENT -->
{% endblock %}
